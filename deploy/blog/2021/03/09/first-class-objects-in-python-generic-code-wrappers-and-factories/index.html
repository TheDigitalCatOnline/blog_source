<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>The Digital Cat - First-class objects in Python: generic code, wrappers, and factories</title>
    <meta charset="utf-8" />
    <meta http-equiv='content-language' content='en-gb'>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="A blog featuring in-depth posts about Python, Scala, TDD, devops, security and all things development">
<meta name="description" content="One of the most important concepts that you can find in Python (as well in other languages like JavaScript, Ruby, and Scala, just to name some of the most important ones) is that of first-class citizenship. In this post I will discuss what first-class means and what practical contribution it …">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@thedigicat" />
<meta name="twitter:title" content="First-class objects in Python: generic code, wrappers, and factories" />
<meta name="twitter:description" content="One of the most important concepts that you can find in Python (as well in other languages like JavaScript, Ruby, and Scala, just to name some of the most important ones) is that of first-class citizenship. In this post I will discuss what first-class means and what practical contribution it …" />
<meta name="twitter:image" content="https://www.thedigitalcatonline.com/images/first-class-objects-in-python-generic-code-wrappers-and-factories.jpg" />
    <script src="https://kit.fontawesome.com/15214b60ba.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;1,400;1,600&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="/theme/css/main.min.css?11abb51c">
    <link href="/images/global/favicon.jpg" rel="icon">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74364524-1"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     
     gtag('config', 'UA-74364524-1');
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FZ55XG1KGG"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     
     gtag('config', 'G-FZ55XG1KGG');
    </script>
  </head>

  <body class="preload">
    <div class="container">
      <div class="sidebar navigation">
<nav>
<div class="links">
  <ul>
    <li class="link"><a href="/index.html">Homepage</a></li>
    <li class="link"><a href="/pages/about.html">About</a></li>
    <li class="link"><a href="/archives/index.html">Archives</a></li>
  </ul>
</div></nav>
<section>
  <header>
    <h2>Categories</h2>
  </header>
<ul>
  <li><a href="/category/programming/">Programming</a></li>
  <li><a href="/category/projects/">Projects</a></li>
  <li><a href="/category/retro/">Retro</a></li>
</ul></section>
<section>
  <header>
    <h2>Feeds</h2>
  </header>
<ul>
  <li><i class="fas fa-rss" aria-hidden="true"></i> <a href="/atom.xml">All posts</a></li>


  <li><i class="fas fa-rss" aria-hidden="true"></i> <a href="/category/programming/atom.xml">All posts in category: Programming</a></li>
</ul></section>
<section>
  <header>
    <h2>Tags</h2>
  </header>
<ul class="tags">
    <li class="tag tag-size-3">
      <a title="Posts about algorithms" href="/categories/algorithms/">algorithms</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about amiga" href="/categories/amiga/">amiga</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about AMQP" href="/categories/amqp/">AMQP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about architectures" href="/categories/architectures/">architectures</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about assembly" href="/categories/assembly/">assembly</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about AWS" href="/categories/aws/">AWS</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about big data" href="/categories/big-data/">big data</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about blogging" href="/categories/blogging/">blogging</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about C" href="/categories/c/">C</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Clojure" href="/categories/clojure/">Clojure</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about compilers" href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about concurrent programming" href="/categories/concurrent-programming/">concurrent programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about cryptography" href="/categories/cryptography/">cryptography</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about decorators" href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about design" href="/categories/design/">design</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about devops" href="/categories/devops/">devops</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about distributed systems" href="/categories/distributed-systems/">distributed systems</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Django" href="/categories/django/">Django</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Docker" href="/categories/docker/">Docker</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about ed25519" href="/categories/ed25519/">ed25519</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about editor" href="/categories/editor/">editor</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Emacs" href="/categories/emacs/">Emacs</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Erlang" href="/categories/erlang/">Erlang</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Flask" href="/categories/flask/">Flask</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about functional programming" href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about generators" href="/categories/generators/">generators</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Git" href="/categories/git/">Git</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about HTML" href="/categories/html/">HTML</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about HTTP" href="/categories/http/">HTTP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about infrastructure" href="/categories/infrastructure/">infrastructure</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about JavaScript" href="/categories/javascript/">JavaScript</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Lambda" href="/categories/lambda/">Lambda</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about M68000" href="/categories/m68000/">M68000</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Markdown" href="/categories/markdown/">Markdown</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Mau" href="/categories/mau/">Mau</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaclasses" href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaprogramming" href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Notebook" href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about OOP" href="/categories/oop/">OOP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about operating systems" href="/categories/operating-systems/">operating systems</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about pelican" href="/categories/pelican/">pelican</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Pika" href="/categories/pika/">Pika</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Postage" href="/categories/postage/">Postage</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Postgres" href="/categories/postgres/">Postgres</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about pytest" href="/categories/pytest/">pytest</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python" href="/categories/python/">Python</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Python2" href="/categories/python2/">Python2</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python3" href="/categories/python3/">Python3</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about RabbitMQ" href="/categories/rabbitmq/">RabbitMQ</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about refactoring" href="/categories/refactoring/">refactoring</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about retroprogramming" href="/categories/retroprogramming/">retroprogramming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about RSA" href="/categories/rsa/">RSA</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Scala" href="/categories/scala/">Scala</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSH" href="/categories/ssh/">SSH</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSL" href="/categories/ssl/">SSL</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about TDD" href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Terraform" href="/categories/terraform/">Terraform</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about testing" href="/categories/testing/">testing</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about tools" href="/categories/tools/">tools</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about versioning" href="/categories/versioning/">versioning</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about video" href="/categories/video/">video</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about WWW" href="/categories/www/">WWW</a>
    </li>
</ul></section>
<section>
  <header>
    <h2>Get in touch</h2>
  </header>
  <ul class="contact">
    <li><i class="fab fa-twitter" aria-hidden="true"></i> <a href="https://twitter.com/thedigicat">Twitter</a></li>
    <li><i class="fab fa-github" aria-hidden="true"></i> <a href="https://github.com/TheDigitalCatOnline">GitHub</a></li>
  </ul>
</section>      </div>
      <div class="page">
	<header class="primary" >
	  <button type="button">
	    <i class="fas fa-bars"></i>
	  </button>
	  <p>The Digital Cat</p>
	</header>
	<div class="mobile-menu navigation">
<nav>
<div class="links">
  <ul>
    <li class="link"><a href="/index.html">Homepage</a></li>
    <li class="link"><a href="/pages/about.html">About</a></li>
    <li class="link"><a href="/archives/index.html">Archives</a></li>
  </ul>
</div></nav>
<section>
  <header>
    <h2>Categories</h2>
  </header>
<ul>
  <li><a href="/category/programming/">Programming</a></li>
  <li><a href="/category/projects/">Projects</a></li>
  <li><a href="/category/retro/">Retro</a></li>
</ul></section>
<section>
  <header>
    <h2>Tags</h2>
  </header>
<ul class="tags">
    <li class="tag tag-size-3">
      <a title="Posts about algorithms" href="/categories/algorithms/">algorithms</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about amiga" href="/categories/amiga/">amiga</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about AMQP" href="/categories/amqp/">AMQP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about architectures" href="/categories/architectures/">architectures</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about assembly" href="/categories/assembly/">assembly</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about AWS" href="/categories/aws/">AWS</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about big data" href="/categories/big-data/">big data</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about blogging" href="/categories/blogging/">blogging</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about C" href="/categories/c/">C</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Clojure" href="/categories/clojure/">Clojure</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about compilers" href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about concurrent programming" href="/categories/concurrent-programming/">concurrent programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about cryptography" href="/categories/cryptography/">cryptography</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about decorators" href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about design" href="/categories/design/">design</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about devops" href="/categories/devops/">devops</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about distributed systems" href="/categories/distributed-systems/">distributed systems</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Django" href="/categories/django/">Django</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Docker" href="/categories/docker/">Docker</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about ed25519" href="/categories/ed25519/">ed25519</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about editor" href="/categories/editor/">editor</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Emacs" href="/categories/emacs/">Emacs</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Erlang" href="/categories/erlang/">Erlang</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Flask" href="/categories/flask/">Flask</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about functional programming" href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about generators" href="/categories/generators/">generators</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Git" href="/categories/git/">Git</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about HTML" href="/categories/html/">HTML</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about HTTP" href="/categories/http/">HTTP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about infrastructure" href="/categories/infrastructure/">infrastructure</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about JavaScript" href="/categories/javascript/">JavaScript</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Lambda" href="/categories/lambda/">Lambda</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about M68000" href="/categories/m68000/">M68000</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Markdown" href="/categories/markdown/">Markdown</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Mau" href="/categories/mau/">Mau</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaclasses" href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaprogramming" href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Notebook" href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about OOP" href="/categories/oop/">OOP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about operating systems" href="/categories/operating-systems/">operating systems</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about pelican" href="/categories/pelican/">pelican</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Pika" href="/categories/pika/">Pika</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Postage" href="/categories/postage/">Postage</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Postgres" href="/categories/postgres/">Postgres</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about pytest" href="/categories/pytest/">pytest</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python" href="/categories/python/">Python</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Python2" href="/categories/python2/">Python2</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python3" href="/categories/python3/">Python3</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about RabbitMQ" href="/categories/rabbitmq/">RabbitMQ</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about refactoring" href="/categories/refactoring/">refactoring</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about retroprogramming" href="/categories/retroprogramming/">retroprogramming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about RSA" href="/categories/rsa/">RSA</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Scala" href="/categories/scala/">Scala</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSH" href="/categories/ssh/">SSH</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSL" href="/categories/ssl/">SSL</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about TDD" href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Terraform" href="/categories/terraform/">Terraform</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about testing" href="/categories/testing/">testing</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about tools" href="/categories/tools/">tools</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about versioning" href="/categories/versioning/">versioning</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about video" href="/categories/video/">video</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about WWW" href="/categories/www/">WWW</a>
    </li>
</ul></section>	</div>
	
<div class="page-content">
  <header>
    <h1>First-class objects in Python: generic code, wrappers, and factories</h1>
    <div class="post-info">
      <p>By Leonardo Giordani - <i class="fas fa-calendar-alt"></i> <time datetime="2021-03-09T16:00:00+00:00"> 09/03/2021</time></p>
      <p class="tags">
	<a class="tag category" href="/category/programming/" title="All posts in category Programming">Programming</a>
	<a class="tag" href="/categories/python/">Python</a>
	<a class="tag" href="/categories/python2/">Python2</a>
	<a class="tag" href="/categories/python3/">Python3</a>
	<a class="tag" href="/categories/oop/">OOP</a>
	<a class="tag" href="/categories/functional-programming/">functional programming</a>
	<a class="tag" href="/categories/decorators/">decorators</a>
      </p>
      <p class="share">Share on: <span><a class="" href="https://twitter.com/intent/tweet?text=First-class%20objects%20in%20Python%3A%20generic%20code%2C%20wrappers%2C%20and%20factories&url=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/&via=thedigicat&hashtags=python,python2,python3,oop,functional-programming,decorators" target="_blank" title="Share on Twitter"><i class="fab fa-twitter"></i> Twitter</a></span>
<span><a class="" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/&title=First-class%20objects%20in%20Python%3A%20generic%20code%2C%20wrappers%2C%20and%20factories&summary=One%20of%20the%20most%20important%20concepts%20that%20you%20can%20find%20in%20Python%20%28as%20well%20in%20other%20languages%20like%20JavaScript%2C%20Ruby%2C%20and%20Scala%2C%20just%20to%20name%20some%20of%20the%20most%20important%20ones%29%20is%20that%20of%20first-class%20citizenship.%20In%20this%20post%20I%20will%20discuss%20what%20first-class%20means%20and%20what%20practical%20contribution%20it%20%E2%80%A6&source=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/" target="_blank" title="Share on LinkedIn"><i class="fab fa-linkedin"></i> LinkedIn</a></span>
<span><a class="" href="https://news.ycombinator.com/submitlink?t=First-class%20objects%20in%20Python%3A%20generic%20code%2C%20wrappers%2C%20and%20factories&u=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/" target="_blank" title="Share on HackerNews"><i class="fab fa-hacker-news"></i> HackerNews</a></span>
<span><a class="" href="mailto:?subject=First-class%20objects%20in%20Python%3A%20generic%20code%2C%20wrappers%2C%20and%20factories&amp;body=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/" target="_blank" title="Share via Email"><i class="fas fa-envelope"></i> Email</a></span>
<span><a class="" href="https://www.reddit.com/submit?url=https%3A//www.thedigitalcatonline.com/blog/2021/03/09/first-class-objects-in-python-generic-code-wrappers-and-factories/&title=First-class%20objects%20in%20Python%3A%20generic%20code%2C%20wrappers%2C%20and%20factories" target="_blank" title="Share via Reddit"><i class="fab fa-reddit"></i> Reddit</a></span></p>    
    </div>
  </header>
  
  <div class="post-content">
    <p>One of the most important concepts that you can find in Python (as well in other languages like JavaScript, Ruby, and Scala, just to name some of the most important ones) is that of <strong>first-class citizenship</strong>. In this post I will discuss what <em>first-class</em> means and what practical contribution it can give to our code, together with a derived concept, that of factories.</p><p>The question where we start from is very simple: we can assign values to variables and pass values to functions. But are functions valid "values" as well? Can we use them as we use integers or lists?</p><p>The answer is yes, and this feature is granted by the so-called <em>first-class citizenship</em> of functions, or, if you prefer, by <em>high-order functions</em>.</p><p>As I said, the subject matter is very important, and also very broad. Exploring it in detail would make this post too long, and I don't think I have enough knowledge to face such a task anyway. So, I will try to explain the main concepts through simple examples and exercises without digging to much into what happens under the bonnet.</p><p>You can follow the post using <a href="/notebooks/first-class-objects-and-factories-in-python.ipynb">this Jupyter Notebook</a>.</p><h2 id="recap-how-to-define-functions-in-python">Recap: how to define functions in Python<a class="headerlink" href="#recap-how-to-define-functions-in-python" title="Permanent link">¶</a></h2><p>Let's start with a simple review of the basic syntax we use to define functions in Python. There are four main components in a function: the keyword <code>def</code>, the name of the function, the arguments, and the body.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">name_of_the_function</span><span class="p">(</span><span class="n">arguments</span><span class="o">...</span><span class="p">):</span>
    <span class="n">body</span>
</pre></div>
</div></div><p>A trivial example is a function that calculates the square of a number</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</pre></div>
</div></div><p>This function is called <code>square</code>, receives a single unnamed argument <code>x</code>, and calculates and returns <code>x * x</code>. The arguments of a function are (just like in mathematics) placeholders for concrete values that will be passed when we <em>call</em> the function, that is when we execute its code using those values. Functions can <em>return</em> a single value, and if you don't explicitly insert any <code>return</code> statement Python will append a default <code>return None</code> to your function.</p><p>This is all we need to start!</p><h2 id="functions-as-arguments-generic-functions">Functions as arguments: generic functions<a class="headerlink" href="#functions-as-arguments-generic-functions" title="Permanent link">¶</a></h2><p>The first feature granted to a component by first-class citizenship in the land of programming languages is that it <strong>can be passed as an argument to a function</strong>. You already know that you can pass values of all the built-in types and also instances of objects, but as a matter of fact you can also pass functions. Let's have a look at a simple example</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><p>As you can see here the first argument <code>func</code> is used internally as a function. Let's try to use it together with the function <code>square</code> that we defined earlier</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">process</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">25</span>
</pre></div>
</div></div><p>The function <code>process</code> receives the function <code>square</code>, so internally it executes <code>square(value)</code>, and since <code>value</code> is 5 the result is 5 squared. If we define a function called <code>inc</code> that increments a number</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">inc</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div></div><p>and pass that to <code>process</code> we should get 6</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">process</span><span class="p">(</span><span class="n">inc</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="mi">6</span>
</pre></div>
</div></div><h3 id="exercise">Exercise</h3><p>Write a function <code>apply</code> that accepts a function and an iterable (e.g. a list) and applies the function to each element of the iterable.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div></div><p>Once defined, you should be able to run</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">apply</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div></div><h4 id="solution">Solution</h4><p>A basic solution for this problem is the following</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
    	<span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">func</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div></div><p>My advice is always to start with simple solutions and then to improve them. In this case you might (and you should) write what is usually called a more Pythonic solution (or a more <em>idiomatic</em> one).</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">iterable</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">func</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">]</span>
</pre></div>
</div></div><h3 id="exercise">Exercise</h3><p>Define a function <code>dec</code> that decrements by 1 the argument (mirroring <code>inc</code>). Then create a function called <code>compute</code> that accepts a list of functions and a single value, and applies each function to the value.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">functions</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div></div><p>Once defined you should be able to run</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">compute</span><span class="p">([</span><span class="n">square</span><span class="p">,</span> <span class="n">inc</span><span class="p">,</span> <span class="n">dec</span><span class="p">],</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</pre></div>
</div></div><h4 id="solution">Solution</h4><p>This problem is somehow orthogonal to the previous one. A trivial solution is</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">dec</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">-</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">functions</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">:</span>
    	<span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div></div><p>As I did before, I refactored it into something more Pythonic like</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">functions</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">]</span>
</pre></div>
</div></div><h3 id="python-built-ins">Python built-ins</h3><p>The function <code>apply</code> that we defined in the first exercise is so important that Python has a built-in function <code>map</code> that performs exactly the same job. Feel free to try it and read about it at <a href="https://docs.python.org/3/library/functions.html#map">https://docs.python.org/3/library/functions.html#map</a>. Remember that <code>map</code> returns a <code>map object</code> (which is an iterator), so if you want to print the results you need to cast it into a list</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="o">&lt;</span><span class="nb">map</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fc011402ee0</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div></div><h3 id="wrap-up">Wrap up</h3><p>Since you can treat functions as "values", you can also store them into structures like lists or dictionaries. I'm sure you understand that this feature alone gives a boost to the expressive power of the language, and in particular it make easier to write <em>generic functions</em>.</p><p>The adjective <em>generic</em>, in programming languages, is usually related to a higher level of algorithmic abstraction than the one of simple procedural programming. What we did in this section can be defined generic code because we didn't specify a function that performs a specific action on the elements of a list, but one that applies a function that is still to be defined to them.</p><h2 id="nested-functions-wrappers">Nested functions: wrappers<a class="headerlink" href="#nested-functions-wrappers" title="Permanent link">¶</a></h2><p>Now that we learned that functions can accept other functions, let's move on and learn that <strong>functions can host other functions</strong>, defining them inside their body. This allows you to create what is usually nicknamed a <em>helper function</em> that might simplify an algorithm, without the need of creating it globally.</p><p>For example, let's write a function that removes the extension from each file in a list</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_extensions</span><span class="p">(</span><span class="n">file_list</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div></div><p>You can test this with the list <code>[&quot;foo.txt&quot;, &quot;bar.mp4&quot;, &quot;python3&quot;]</code></p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">get_extensions</span><span class="p">([</span><span class="s2">&quot;foo.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;bar.mp4&quot;</span><span class="p">,</span> <span class="s2">&quot;python3&quot;</span><span class="p">])</span>
<span class="p">[</span><span class="s1">&#39;txt&#39;</span><span class="p">,</span> <span class="s1">&#39;mp4&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
</pre></div>
</div></div><p>As you can see the algorithm is not terribly complicated, but it's rich enough to make it impossible to write it in the form of a list comprehension, which is one of the standard idiomatic refactoring that improve the readability of Python code. If we define a helper function, though, things will get better</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_extensions</span><span class="p">(</span><span class="n">file_list</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_get_extension</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ext</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">:</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_get_extension</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">results</span>
</pre></div>
</div></div><p>And applying another iteration of our idiomatic filter we can come up with</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_extensions</span><span class="p">(</span><span class="n">file_list</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_remove_ext</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">file_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>

        <span class="k">return</span> <span class="n">file_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">_remove_ext</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">file_list</span><span class="p">]</span>
</pre></div>
</div></div><p>Oh, in case you don't know it already, the standard library provides a very nice function called <code>splitext</code> (<a href="https://docs.python.org/3/library/os.path.html#os.path.splitext">https://docs.python.org/3/library/os.path.html#os.path.splitext</a>) that performs the very same job of our example, so don't reimplement it if you need that functionality.</p><h3 id="exercise">Exercise</h3><p>A very simple exercise here, just to practice what we learned. Create a function called <code>wrapped_inc</code> that accepts a <code>value</code>. In the body create a function <code>_inc</code> that accepts a value and increments it. Then, still inside the body of the outer function, call <code>_inc</code> passing <code>value</code> and return the result. When you are done, look at it and explain what happens when you run <code>wrapped_inc(41)</code> and what is the result.</p><h4 id="solution">Solution</h4><p>The function is nothing more than a simpler version of what we did with <code>get_extensions</code></p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wrapped_inc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_inc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">_inc</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><p>When we run <code>wrapped_inc(41)</code> the function defines the wrapper and then calls it, so <code>_inc</code> receives 41, increments it and returns it. The second <code>return</code> statement, then returns that same value to the original caller. The returned value is 42, which is by the way the answer to all questions.</p><h3 id="wrap-up-pun-intended">Wrap up (pun intended)</h3><p>Whenever you have an outer function that defines and calls an inner function you can say that the outer one <em>wraps</em> the inner one. The concept of wrappers is extremely important in programming languages and in architectures, as any system can be seen as a wrapper of smaller ones, and consequently be described with a higher level of abstraction.</p><h2 id="functions-as-return-values-factories">Functions as return values: factories<a class="headerlink" href="#functions-as-return-values-factories" title="Permanent link">¶</a></h2><p>The third feature provided by first-class citizenship is that <strong>functions can return other functions</strong>. The simplest (and not really useful) example is that of a function defining and returning a helper function</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_inc</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">_inc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">_inc</span>
</pre></div>
</div></div><p>Note that <code>create_inc</code> doesn't accept <code>value</code> as an argument because its job is that of returning a function, not to compute anything. Let's see how we can use this before we move to more interesting examples</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">create_inc</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">6</span>
</pre></div>
</div></div><p>When I call <code>create_inc</code> I get the function <code>_inc</code>, that I assign to the variable <code>f</code>. Since it now contains a function I can call it passing a value. As I said, this is not a very useful example, but it shows an important concept, that you can create functions that produce other functions. In this scenario the outer function is called a <em>factory</em>.</p><p>So far the factory is not that useful, but it could be much more powerful if it was possible to parametrise the returned function. Well, good news: it is possible.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_inc</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_inc</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">+</span> <span class="n">steps</span>

    <span class="k">return</span> <span class="n">_inc</span>
</pre></div>
</div></div><p>Here we pass the parameter <code>steps</code> to the factory, and this is used by the function <code>_inc</code>. The inner function can access <code>steps</code> as it is part of the same scope it lives in, but the magic is that <code>steps</code> is still accessible when the function has been created and lives "outside" the factory.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">inc5</span> <span class="o">=</span> <span class="n">create_inc</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inc10</span> <span class="o">=</span> <span class="n">create_inc</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inc5</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">7</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inc10</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">12</span>
</pre></div>
</div></div><p>As you can see <code>inc5</code> uses 5 as a value for <code>steps</code>, while <code>inc10</code> uses 10. The fact that an inner function "remembers" the scope where it was defined is called <em>closure</em> in programming languages that support this feature.</p><h3 id="exercise">Exercise</h3><p>Suppose we noticed that we use <code>apply(square, some_iterable)</code> and <code>apply(inc, some_iterable)</code> a lot on different list so we would like to create two shortcut functions <code>lsquare</code> and <code>linc</code> that accept only an iterable and perform the action suggested by their name.</p><p>Write a function called <code>partial_square</code> that accepts no arguments and returns a function that runs <code>square</code> on an <code>iterable</code>.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partial_square</span><span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div></div><p>After you defined it you should be able to run the following code</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">lsquare</span> <span class="o">=</span> <span class="n">partial_square</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lsquare</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div></div><h4 id="solution">Solution</h4><p>We can start from the first version of <code>create_inc</code>, but the inner function has to call <code>apply</code>.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partial_square</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">_apply</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    	<span class="k">return</span> <span class="n">apply</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">iterable</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_apply</span>
</pre></div>
</div></div><p>Here you have a function that defines a function that runs a function. If your head is spinning it's OK. Grab something to drink, have a walk, then come back, there is still something to learn.</p><h3 id="exercise">Exercise</h3><p>Improve <code>partial_square</code> writing a function called <code>partial_apply</code> that accepts a function <code>func</code> and returns a function that runs <code>func</code> on an <code>iterable</code>.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partial_apply</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div></div><p>If your solution is correct you should be able to run this code</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">lsquare</span> <span class="o">=</span> <span class="n">partial_apply</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lsquare</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
</pre></div>
</div></div><h4 id="solution">Solution</h4><p>Leveraging what we learned with the two versions of <code>create_inc</code> we can easily change <code>partial_square</code> to be more generic</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">partial_apply</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_apply</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
    	<span class="k">return</span> <span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">iterable</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">_apply</span>
</pre></div>
</div></div><h3 id="pythons-standard-library">Python's standard library</h3><p>A <em>partial function</em> is a very important and useful concept, so Python provides a solution with <code>functools.partial</code> that is an even more generic version of what we wrote just now. You can find the documentation at <a href="https://docs.python.org/3/library/functools.html#functools.partial">https://docs.python.org/3/library/functools.html#functools.partial</a>.</p><h3 id="wrap-up">Wrap up</h3><p>Factories are a very important concept in Object-oriented Programming, and once you introduce them they can radically change the approach to a specific problem. As always, remember that you shouldn't use a complex solution if there is a simpler one, so do not introduce factories if you can just need a couple of simple functions.</p><h2 id="functions-are-objects...-or-are-objects-functions">Functions are objects... or are objects functions?<a class="headerlink" href="#functions-are-objects...-or-are-objects-functions" title="Permanent link">¶</a></h2><p>In Python everything is an object. Basic values like integers and floats, structures like lists and dictionaries, class instances, classes themselves, and functions. You can actually look inside a function and read some of its attributes</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">(</span><span class="n">inc</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;__annotations__&#39;</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">,</span> <span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="s1">&#39;__closure__&#39;</span><span class="p">,</span> <span class="s1">&#39;__code__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__defaults__&#39;</span><span class="p">,</span> <span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dict__&#39;</span><span class="p">,</span> <span class="s1">&#39;__dir__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="s1">&#39;__eq__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__format__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ge__&#39;</span><span class="p">,</span> <span class="s1">&#39;__get__&#39;</span><span class="p">,</span> <span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span> <span class="s1">&#39;__globals__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__gt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__hash__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span> <span class="s1">&#39;__kwdefaults__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__le__&#39;</span><span class="p">,</span> <span class="s1">&#39;__lt__&#39;</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;__ne__&#39;</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="s1">&#39;__qualname__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span> <span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span> <span class="s1">&#39;__repr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span> <span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__str__&#39;</span><span class="p">,</span> <span class="s1">&#39;__subclasshook__&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inc</span><span class="o">.</span><span class="vm">__name__</span>
<span class="s1">&#39;_inc&#39;</span>
</pre></div>
</div></div><p>This explains why Python doesn't even flinch when you pass a function as a argument or when you return it from another function. For Python, an integer, a dictionary, and a function are all the same.</p><p>If we look closely at classes, though, we immediately notice something that connects them to functions. When you instantiate a class you actually call it as if it was a function, and we know that internally Python calls (among other things) the method <code>__init__</code>.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Item</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>

<span class="n">i</span> <span class="o">=</span> <span class="n">Item</span><span class="p">(</span><span class="s2">&quot;TNT&quot;</span><span class="p">)</span> <span class="callout">1</span>
</pre></div>
</div></div><p>The code at <span class="callout">1</span> is clearly a function call, even though the function is actually a class. What is going on?</p><p>Python has the concept of <em>callable</em>, that is an object that can be called using the round brackets syntax <code>()</code> and potentially passing arguments to the call. An object is callable if it defines the method <code>__call__</code>, which is the one that will receive the arguments.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">Item</span><span class="p">(</span><span class="s2">&quot;TNT&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span>
<span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Item</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fc07203ee80</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="o">.</span><span class="n">label</span>
<span class="s1">&#39;TNT&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">j</span> <span class="o">=</span> <span class="n">Item</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="s2">&quot;TNT&quot;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">j</span>
<span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">Item</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7fc071fd64c0</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">j</span><span class="o">.</span><span class="n">label</span>
<span class="s1">&#39;TNT&#39;</span>
</pre></div>
</div></div><p>As you can see from the execution of <code>dir(inc)</code> functions have the method call, while something like an integer doesn't (try to run <code>dir(5)</code> to see it in action).</p><p>So, to solve the chicken-and-egg problem, we should be a bit more specific and say that in Python <em>functions are objects</em>, and <em>both functions and classes are callables</em>. Now that we relieved our troubled minds from dark theoretical doubts of avian nature, we can look at the practical side of it. If classes behave like functions we can apply generic programming, wrappers, and factories to them.</p><p>In the following paragraphs I will make heavy use of three words: <em>class</em>, <em>instance</em>, and <em>object</em>. Whenever I use object I mean it in a broader sense, so strictly speaking it means both classes and instances. Since this is not an academic paper please be tolerant with me and my sometimes imprecise nomenclature, and try to look a the bigger picture.</p><p>I will also discuss specifically the method <code>__init__</code>, which is the one that gets called implicitly when you instantiate a class. Other methods are called and behave like standard functions.</p><h2 id="generic-objects">Generic objects<a class="headerlink" href="#generic-objects" title="Permanent link">¶</a></h2><p>Translating what we said for generic functions we might say that</p><ul><li>Objects can be passed as arguments</li><li>Objects can accept other objects as arguments</li></ul><p>For example we might reimplement the function <code>process</code> as an object</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Process</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><p>or keep the functional version of <code>process</code> and assume the user will pass an object with a specific interface</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">filt</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">filt</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="n">process</span><span class="p">(</span><span class="n">Square</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div></div><p>Please note that I'm not saying this is the best way to do things (in this case it is not). I'm just showing you what can be done syntactically speaking.</p><p>In the latter example I'm assuming the object passed by the user is a class that needs to be initialised, but we might change the API and require an instance instead. Passing a class exposes the function to all the problems that come with polymorphism, but gives the function the power to instantiate the class, which gives a high degree of configuration to that setup. Passing an instance if definitely less complicated in terms of API but also more limited. If you are interested in reading more about polymorphism in Python you might find what you are looking for in the post <a href="https://www.thedigitalcatonline.com/blog/2020/03/27/mixin-classes-in-python/">Multiple inheritance and mixin classes in Python</a>.</p><h2 id="wrappers">Wrappers<a class="headerlink" href="#wrappers" title="Permanent link">¶</a></h2><p>Since you can define functions in other functions nothing prevents you from defining a class inside another class. The syntax is very similar to that of helper methods and the reasons behind the choice are the same.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Outer</span><span class="p">:</span>
  <span class="k">class</span> <span class="nc">Inner</span><span class="p">:</span>
      <span class="k">pass</span>

  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">pass</span>
</pre></div>
</div></div><p>Please note that everything is defined in the body of the class automatically becomes a class attribute and is thus shared between instances. You can read more about this in the post <a href="https://www.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-2-classes-and-members/">Object-Oriented Programming in Python 3 - Classes and members</a>. You can find an example of this pattern in Django, where models can define a class <code>Meta</code> to host metadata (<a href="https://docs.djangoproject.com/en/3.1/topics/db/models/#meta-options">https://docs.djangoproject.com/en/3.1/topics/db/models/#meta-options</a>).</p><p>You can also define a class inside a function, even though I think this might be useful very rarely. The case of defining functions inside classes is clearly already covered by the standard syntax of methods.</p><p>Finally, <strong>composition</strong> leverages the fact that you can store instances of objects inside another object. YOu can read more about composition and why you should start using it in the post <a href="https://www.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-3-delegation-composition-and-inheritance/">Object-Oriented Programming in Python 3 - Composition and inheritance</a>.</p><h2 id="factories">Factories<a class="headerlink" href="#factories" title="Permanent link">¶</a></h2><p>The concept of factory is rooted in the Object-oriented paradigm, and as happened for generic objects there are two different way to use them:</p><ul><li>An object factory is a function that creates objects</li><li>A factory object is an objects that behaves like a factory</li></ul><h2 id="object-factories">Object factories<a class="headerlink" href="#object-factories" title="Permanent link">¶</a></h2><p>When it comes to objects we always have two entities involved: the class and the instance (in Python we could add the metaclass, but since that is rarely used I prefer to leave it outside the equation for now). An object factory can thus be either a <em>class factory</em> or an <em>instance factory</em>.</p><p>A class factory is simply a function that returns a class according to some algorithm</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_type</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="s1">&#39;low&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;low&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span>
    <span class="k">elif</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;medium&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span>
    <span class="k">elif</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;high&#39;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="k">return</span> <span class="n">Decimal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>
</pre></div>
</div></div><p>This (very trivial!) factory could be used in an application to dynamically generate the type used to host values provided through a GUI for calculations. For example</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">gui_input</span> <span class="o">=</span> <span class="mf">3.141592653589793238</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">low_resolution_input</span> <span class="o">=</span> <span class="n">create_type</span><span class="p">()(</span><span class="n">gui_input</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">low_resolution_input</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">medium_resolution_input</span> <span class="o">=</span> <span class="n">create_type</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="s2">&quot;medium&quot;</span><span class="p">)(</span><span class="n">gui_input</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">medium_resolution_input</span>
<span class="mf">3.141592653589793</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">high_resolution_input</span> <span class="o">=</span> <span class="n">create_type</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="s2">&quot;high&quot;</span><span class="p">)(</span><span class="n">gui_input</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">high_resolution_input</span>
<span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3.141592653589793115997963468544185161590576171875&#39;</span><span class="p">)</span>
</pre></div>
</div></div><p>(please bear with me, this code has no scientific validity, it's there just to illustrate a concept).</p><p>An <em>instance factory</em>, instead, returns instances of a class. The class itself can be created internally</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init_myint</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">MyInt</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
        <span class="k">pass</span>
	
    <span class="k">return</span> <span class="n">MyInt</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><p>or can be passed from outside</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init_myobj</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><h2 id="factory-objects">Factory objects<a class="headerlink" href="#factory-objects" title="Permanent link">¶</a></h2><p>It is clearly possible to use an object as the factory itself, which means having a class or an instance which purpose is that of creating and configuring other objects and to return them. Here the number of combinations increases drastically, as we can have classes that produce classes or instances, and instances that produce classes or instances.</p><p>For the sake of simplicity I will give just a single example of a factory object, an instance that creates other instances, and leave the other cases to the reader.</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Converter</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="s1">&#39;low&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;low&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">int</span>
        <span class="k">elif</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;medium&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="nb">float</span>
        <span class="k">elif</span> <span class="n">precision</span> <span class="o">==</span> <span class="s1">&#39;high&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">Decimal</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div></div><p>As you can see aside from the usual differences between functions and objects, there is nothing new in this example.</p><h2 id="decorators">Decorators<a class="headerlink" href="#decorators" title="Permanent link">¶</a></h2><p>Decorators are another important concept that any Python programmer should know. While I think you might not need to know all the gritty details about decorators, you should understand the basic principles and be able to write them.</p><p>Since I already discussed them in depth in my post <a href="https://www.thedigitalcatonline.com/blog/2015/04/23/python-decorators-metaprogramming-with-style/">Python decorators: metaprogramming with style</a> I will just scratch the surface here, showing the connection with first-class citizenship. The simplest way to create a decorator is to use a functional approach with what we previously called a wrapper</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_func</span><span class="p">():</span>
        <span class="n">func</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">_func</span>
</pre></div>
</div></div><p>In this example, <code>decorator</code> is a function that accepts another function <code>func</code>. When called, <code>decorator</code> creates an internal helper <code>_func</code> that calls <code>func</code> and return this wrapper. So far, this doesn't add anything else our code (aside from a big headache, maybe). Consider however what we learned about closures and you will quickly realise that you can do a lot with <code>_func</code>.</p><p>As for the decoration syntax, remember that writing</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="nd">@decorator</span>
<span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div></div><p>is just a shortcut (<em>syntactic sugar</em>) for the following code</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_function</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="n">some_function</span> <span class="o">=</span> <span class="n">decorator</span><span class="p">(</span><span class="n">some_function</span><span class="p">)</span>
</pre></div>
</div></div><p>Where you see in action functions being treated as first-class citizens.</p><p>As a simple concrete example, let's write a decorator that changes the default return value of functions. As we said in the initial recap, functions in Python return <code>None</code> by default, but we might want to change this behaviour. Let's say for example that we want them to return <code>True</code>. We can write a decorator like</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">return_true</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">_func</span>
</pre></div>
</div></div><p>Now we can test it writing and decorating a simple function</p><div class="code"><div class="content"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
<span class="o">...</span>     <span class="k">pass</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">test</span> <span class="o">=</span> <span class="n">return_true</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">test</span><span class="p">()</span>
<span class="kc">True</span>
</pre></div>
</div></div><p>I hope that now, in the light of what we discussed in the previous sections, decorators are not that obscure any more. This can get a bit more complicated if you use a class instead of a pure function, but the underlying concept is exactly the same.</p><h2 id="functools">Functools<a class="headerlink" href="#functools" title="Permanent link">¶</a></h2><p>Python core developers take the functional needs of users very seriously, and provide a module completely dedicated to problems related with high-order functions.</p><p>I already mentioned the module in one of the previous sections, when I discussed the function <code>partial</code>, but I think the whole module deserves to be surveyed at least to be aware of what it can provide. You never know when you will <a href="https://docs.python.org/3/library/functools.html#functools.lru_cache">need a cache</a> or to <a href="https://docs.python.org/3/library/functools.html#functools.reduce">leverage map/reduce</a>.</p><p>If you have only 1 minute I highly recommend you read the <a href="https://docs.python.org/3/library/functools.html#functools.wraps">documentation</a> of <code>wraps</code>, as you should use it for all your function-based decorators.</p><h2 id="use-case-application-factory-in-flask">Use case: application factory in Flask<a class="headerlink" href="#use-case-application-factory-in-flask" title="Permanent link">¶</a></h2><p>Last, a practical example that comes from the wild world of open source. Flask, the well-known web framework, has the concept of <em>application factory</em> (<a href="https://flask.palletsprojects.com/en/1.1.x/patterns/appfactories/">here</a>), which are highly recommended when <a href="https://www.thedigitalcatonline.com/blog/2020/07/05/flask-project-setup-tdd-docker-postgres-and-more-part-1/">setting up a project</a>.</p><p>As you can see from the documentation, an application factory is nothing more than a function that initialises the class <code>Flask</code>, configures it, and eventually returns it. The factory can be then used as an entry point, for example in <code>wsgi.py</code>. What are the advantages of the factory, compared to a plain file that creates the application when imported/run? The documentation states is very clearly</p><div class="callout"><div class="content"><ol><li>Testing. You can have instances of the application with different settings to test every case.</li><li>Multiple instances. Imagine you want to run different versions of the same application. Of course you could have multiple instances with different configs set up in your webserver, but if you use factories, you can have multiple instances of the same application running in the same application process which can be handy.</li></ol></div></div><p>I think this demonstrates the great amount of expressive power that first-class citizenship can give to your code.</p><h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">¶</a></h2><h3 id="the-standard-library">The standard library</h3><ul><li><a href="https://docs.python.org/3/library/functions.html#map">https://docs.python.org/3/library/functions.html#map</a> - The built-in function <code>map</code></li><li><a href="https://docs.python.org/3/library/functools.html#functools.partial">https://docs.python.org/3/library/functools.html#functools.partial</a> - A function to partially apply other functions</li><li><a href="https://docs.python.org/3/library/functools.html#functools.wraps">https://docs.python.org/3/library/functools.html#functools.wraps</a> - A function to build decorators</li></ul><h3 id="wikipedia">Wikipedia</h3><ul><li><a href="https://en.wikipedia.org/wiki/Generic_programming">https://en.wikipedia.org/wiki/Generic_programming</a></li><li><a href="https://en.wikipedia.org/wiki/Wrapper_function">https://en.wikipedia.org/wiki/Wrapper_function</a></li><li><a href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">https://en.wikipedia.org/wiki/Closure_(computer_programming)</a></li><li><a href="https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)">https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)</a></li></ul><h3 id="this-blog">This blog</h3><ul><li><a href="https://www.thedigitalcatonline.com/blog/2020/03/27/mixin-classes-in-python/">Multiple inheritance and mixin classes in Python</a></li><li><a href="https://www.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-2-classes-and-members/">Object-Oriented Programming in Python 3 - Classes and members</a></li><li><a href="https://www.thedigitalcatonline.com/blog/2014/08/20/python-3-oop-part-3-delegation-composition-and-inheritance/">Object-Oriented Programming in Python 3 - Composition and inheritance</a></li><li><a href="https://www.thedigitalcatonline.com/blog/2015/04/23/python-decorators-metaprogramming-with-style/">Python decorators: metaprogramming with style</a></li></ul><h2 id="feedback">Feedback<a class="headerlink" href="#feedback" title="Permanent link">¶</a></h2><p>Feel free to reach me on <a href="https://twitter.com/thedigicat">Twitter</a> if you have questions. The <a href="https://github.com/TheDigitalCatOnline/thedigitalcatonline.github.com/issues">GitHub issues</a> page is the best place to submit corrections.</p>
  </div>


  <section>
    <header>
      <h2>Related Posts</h2>
    </header>
    <div class="paginated-posts">
      <div class="posts">
	<article class="card">
          <a href="/blog/2016/03/06/python-mocks-a-gentle-introduction-part-1/">
            <img src="/images/python-mocks.jpg" alt="python-mocks" />
          </a>
          <div class="body">
            <a href="/blog/2016/03/06/python-mocks-a-gentle-introduction-part-1/"><h2>Python Mocks: a gentle introduction - Part 1</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/decorators/" class="tag">decorators</a>
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/pytest/" class="tag">pytest</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/tdd/" class="tag">TDD</a>
		<a href="/categories/testing/" class="tag">testing</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2016-03-06T18:00:00+01:00">Mar 6, 2016</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2019-02-27T23:30:00+00:00">Feb 27, 2019</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2016/09/27/python-mocks-a-gentle-introduction-part-2/">
            <img src="/images/python-mocks.jpg" alt="python-mocks" />
          </a>
          <div class="body">
            <a href="/blog/2016/09/27/python-mocks-a-gentle-introduction-part-2/"><h2>Python Mocks: a gentle introduction - Part 2</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/decorators/" class="tag">decorators</a>
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/pytest/" class="tag">pytest</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/tdd/" class="tag">TDD</a>
		<a href="/categories/testing/" class="tag">testing</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2016-09-27T09:00:00+00:00">Sep 27, 2016</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2016/04/03/abstract-base-classes-in-python/">
            <img src="/images/abstract-base-classes.jpg" alt="abstract-base-classes" />
          </a>
          <div class="body">
            <a href="/blog/2016/04/03/abstract-base-classes-in-python/"><h2>Abstract Base Classes in Python</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/decorators/" class="tag">decorators</a>
		<a href="/categories/metaclasses/" class="tag">metaclasses</a>
		<a href="/categories/metaprogramming/" class="tag">metaprogramming</a>
		<a href="/categories/notebook/" class="tag">Notebook</a>
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2016-04-03T11:00:00+01:00">Apr 3, 2016</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2016/11/14/clean-architectures-in-python-a-step-by-step-example/">
            <img src="/images/clean-architectures.jpg" alt="clean-architectures" />
          </a>
          <div class="body">
            <a href="/blog/2016/11/14/clean-architectures-in-python-a-step-by-step-example/"><h2>Clean architectures in Python: a step-by-step example</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/pytest/" class="tag">pytest</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/tdd/" class="tag">TDD</a>
		<a href="/categories/architectures/" class="tag">architectures</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2016-11-14T19:00:00+00:00">Nov 14, 2016</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2021-09-24T12:00:00+00:00">Sep 24, 2021</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2018/12/20/cabook/">
            <img src="/images/cabook.jpg" alt="cabook" />
          </a>
          <div class="body">
            <a href="/blog/2018/12/20/cabook/"><h2>Clean Architectures in Python: the book</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/tdd/" class="tag">TDD</a>
		<a href="/categories/testing/" class="tag">testing</a>
		<a href="/categories/architectures/" class="tag">architectures</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2018-12-20T08:00:00+01:00">Dec 20, 2018</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2021-08-22T08:00:00+00:00">Aug 22, 2021</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2015/09/22/clojure-sequential-data-types-for-python-programmers/">
            <img src="/images/sequential-data-types.jpg" alt="sequential-data-types" />
          </a>
          <div class="body">
            <a href="/blog/2015/09/22/clojure-sequential-data-types-for-python-programmers/"><h2>Clojure sequential data types for Python programmers</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/functional-programming/" class="tag">functional programming</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python2/" class="tag">Python2</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/clojure/" class="tag">Clojure</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2015-09-22T19:00:00+01:00">Sep 22, 2015</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2015/04/23/python-decorators-metaprogramming-with-style/">
            <img src="/images/python-decorators-metaprogramming-with-style.jpg" alt="python-decorators-metaprogramming-with-style" />
          </a>
          <div class="body">
            <a href="/blog/2015/04/23/python-decorators-metaprogramming-with-style/"><h2>Python decorators: metaprogramming with style</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/decorators/" class="tag">decorators</a>
		<a href="/categories/functional-programming/" class="tag">functional programming</a>
		<a href="/categories/metaprogramming/" class="tag">metaprogramming</a>
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/python/" class="tag">Python</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2015-04-23T13:00:00+01:00">Apr 23, 2015</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2014/10/14/decorators-and-metaclasses/">
            <img src="/images/decorators-and-metaclasses.jpg" alt="decorators-and-metaclasses" />
          </a>
          <div class="body">
            <a href="/blog/2014/10/14/decorators-and-metaclasses/"><h2>Advanced use of Python decorators and metaclasses</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/decorators/" class="tag">decorators</a>
		<a href="/categories/metaclasses/" class="tag">metaclasses</a>
		<a href="/categories/metaprogramming/" class="tag">metaprogramming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2014-10-14T09:43:08+02:00">Oct 14, 2014</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2020/08/17/delegation-composition-and-inheritance-in-object-oriented-programming/">
            <img src="/images/delegation-composition-and-inheritance-in-object-oriented-programming.jpg" alt="delegation-composition-and-inheritance-in-object-oriented-programming" />
          </a>
          <div class="body">
            <a href="/blog/2020/08/17/delegation-composition-and-inheritance-in-object-oriented-programming/"><h2>Delegation: composition and inheritance in object-oriented programming</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python3/" class="tag">Python3</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2020-08-17T09:00:00+01:00">Aug 17, 2020</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2021-03-06T18:00:00+00:00">Mar 6, 2021</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2020/09/21/tdd-in-python-with-pytest-part-5/">
            <img src="/images/tdd-in-python-with-pytest-part-5.jpg" alt="tdd-in-python-with-pytest-part-5" />
          </a>
          <div class="body">
            <a href="/blog/2020/09/21/tdd-in-python-with-pytest-part-5/"><h2>TDD in Python with pytest - Part 5</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/oop/" class="tag">OOP</a>
		<a href="/categories/pytest/" class="tag">pytest</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/python3/" class="tag">Python3</a>
		<a href="/categories/refactoring/" class="tag">refactoring</a>
		<a href="/categories/tdd/" class="tag">TDD</a>
		<a href="/categories/testing/" class="tag">testing</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2020-09-21T10:30:00+02:00">Sep 21, 2020</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2021-03-06T19:00:00+00:00">Mar 6, 2021</time></p>
	    </div>
          </div>
	</article>
      </div>
    </div>
  </section>
  
</div>

      </div>
    </div>
    <script src="/theme/js/packed.js?46a8f903"></script>

  </body>
</html>