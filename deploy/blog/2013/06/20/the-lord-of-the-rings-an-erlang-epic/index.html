<!DOCTYPE HTML>
<html lang="en">
  <head>
    <title>The Digital Cat - The Lord of the Rings: an Erlang epic</title>
    <meta charset="utf-8" />
    <meta http-equiv='content-language' content='en-gb'>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="A blog featuring in-depth posts about Python, Scala, TDD, devops, security and all things development">
<meta name="description" content="The Lord of the Rings: an Erlang epic">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@thedigicat" />
<meta name="twitter:title" content="The Lord of the Rings: an Erlang epic" />
<meta name="twitter:description" content="Read the full post on The Digital Cat" />
<meta name="twitter:image" content="https://www.thedigitalcatonline.com/images/the-lord-of-the-rings-an-erlang-epic.jpg" />
    <script src="https://kit.fontawesome.com/15214b60ba.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;1,400;1,600&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="/theme/css/main.min.css?11abb51c">
    <link href="/images/global/favicon.jpg" rel="icon">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-74364524-1"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     
     gtag('config', 'UA-74364524-1');
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FZ55XG1KGG"></script>
    <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     
     gtag('config', 'G-FZ55XG1KGG');
    </script>
  </head>

  <body class="preload">
    <div class="container">
      <div class="sidebar navigation">
<nav>
<div class="links">
  <ul>
    <li class="link"><a href="/index.html">Homepage</a></li>
    <li class="link"><a href="/pages/about.html">About</a></li>
    <li class="link"><a href="/archives/index.html">Archives</a></li>
  </ul>
</div></nav>
<section>
  <article class="card">
    <a href="https://www.thedigitalcat.academy/freebie-first-class-objects">
      <img src="/images/first-class-objects-in-python.jpg" />
    </a>
    <div class="body">
      <h2>First-class objects in Python</h2>
      <div class="actions">
        <a class="action" href="https://www.thedigitalcat.academy/freebie-first-class-objects">Get your FREE copy</a>
      </div>
    </div>
  </article>
</section>
<section>
  <article class="card">
    <a href="https://www.thedigitalcat.academy/8-technologies-you-need-to-learn-now">
      <img src="/images/8-technologies.jpg" />
    </a>
    <div class="body">
      <h2>8 Technologies You Need to Learn NOW</h2>
      <div class="actions">
        <a class="action" href="https://www.thedigitalcat.academy/8-technologies-you-need-to-learn-now">Get your FREE copy</a>
      </div>
    </div>
  </article>
</section>
<section>
  <header>
    <h2>Categories</h2>
  </header>
<ul>
  <li><a href="/category/programming/">Programming</a></li>
  <li><a href="/category/projects/">Projects</a></li>
  <li><a href="/category/retro/">Retro</a></li>
</ul></section>
<section>
  <header>
    <h2>Feeds</h2>
  </header>
<ul>
  <li><i class="fas fa-rss" aria-hidden="true"></i> <a href="/atom.xml">All posts</a></li>


  <li><i class="fas fa-rss" aria-hidden="true"></i> <a href="/category/programming/atom.xml">All posts in category: Programming</a></li>
</ul></section>
<section>
  <header>
    <h2>Tags</h2>
  </header>
<ul class="tags">
    <li class="tag tag-size-3">
      <a title="Posts about algorithms" href="/categories/algorithms/">algorithms</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about amiga" href="/categories/amiga/">amiga</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about AMQP" href="/categories/amqp/">AMQP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about architectures" href="/categories/architectures/">architectures</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about assembly" href="/categories/assembly/">assembly</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about AWS" href="/categories/aws/">AWS</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about big data" href="/categories/big-data/">big data</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about blogging" href="/categories/blogging/">blogging</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about C" href="/categories/c/">C</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Clojure" href="/categories/clojure/">Clojure</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about compilers" href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about concurrent programming" href="/categories/concurrent-programming/">concurrent programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about cryptography" href="/categories/cryptography/">cryptography</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about decorators" href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about design" href="/categories/design/">design</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about devops" href="/categories/devops/">devops</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about distributed systems" href="/categories/distributed-systems/">distributed systems</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Django" href="/categories/django/">Django</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Docker" href="/categories/docker/">Docker</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about ed25519" href="/categories/ed25519/">ed25519</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about editor" href="/categories/editor/">editor</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Emacs" href="/categories/emacs/">Emacs</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Erlang" href="/categories/erlang/">Erlang</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Flask" href="/categories/flask/">Flask</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about functional programming" href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about generators" href="/categories/generators/">generators</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Git" href="/categories/git/">Git</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about HTML" href="/categories/html/">HTML</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about HTTP" href="/categories/http/">HTTP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about infrastructure" href="/categories/infrastructure/">infrastructure</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about JavaScript" href="/categories/javascript/">JavaScript</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Lambda" href="/categories/lambda/">Lambda</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about M68000" href="/categories/m68000/">M68000</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Markdown" href="/categories/markdown/">Markdown</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Mau" href="/categories/mau/">Mau</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaclasses" href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaprogramming" href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Notebook" href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about OOP" href="/categories/oop/">OOP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about operating systems" href="/categories/operating-systems/">operating systems</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about pelican" href="/categories/pelican/">pelican</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Pika" href="/categories/pika/">Pika</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Postage" href="/categories/postage/">Postage</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Postgres" href="/categories/postgres/">Postgres</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about pytest" href="/categories/pytest/">pytest</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python" href="/categories/python/">Python</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Python2" href="/categories/python2/">Python2</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python3" href="/categories/python3/">Python3</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about RabbitMQ" href="/categories/rabbitmq/">RabbitMQ</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about refactoring" href="/categories/refactoring/">refactoring</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about retroprogramming" href="/categories/retroprogramming/">retroprogramming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about RSA" href="/categories/rsa/">RSA</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Scala" href="/categories/scala/">Scala</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSH" href="/categories/ssh/">SSH</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSL" href="/categories/ssl/">SSL</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about TDD" href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Terraform" href="/categories/terraform/">Terraform</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about testing" href="/categories/testing/">testing</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about tools" href="/categories/tools/">tools</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about versioning" href="/categories/versioning/">versioning</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about video" href="/categories/video/">video</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about WWW" href="/categories/www/">WWW</a>
    </li>
</ul></section>
<section>
  <header>
    <h2>Get in touch</h2>
  </header>
  <ul class="contact">
    <li><i class="fab fa-twitter" aria-hidden="true"></i> <a href="https://twitter.com/thedigicat">Twitter</a></li>
    <li><i class="fab fa-github" aria-hidden="true"></i> <a href="https://github.com/TheDigitalCatOnline">GitHub</a></li>
  </ul>
</section>      </div>
      <div class="page">
	<header class="primary" >
	  <button type="button">
	    <i class="fas fa-bars"></i>
	  </button>
	  <p>The Digital Cat</p>
	</header>
	<div class="mobile-menu navigation">
<nav>
<div class="links">
  <ul>
    <li class="link"><a href="/index.html">Homepage</a></li>
    <li class="link"><a href="/pages/about.html">About</a></li>
    <li class="link"><a href="/archives/index.html">Archives</a></li>
  </ul>
</div></nav>
<section>
  <header>
    <h2>Categories</h2>
  </header>
<ul>
  <li><a href="/category/programming/">Programming</a></li>
  <li><a href="/category/projects/">Projects</a></li>
  <li><a href="/category/retro/">Retro</a></li>
</ul></section>
<section>
  <header>
    <h2>Tags</h2>
  </header>
<ul class="tags">
    <li class="tag tag-size-3">
      <a title="Posts about algorithms" href="/categories/algorithms/">algorithms</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about amiga" href="/categories/amiga/">amiga</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about AMQP" href="/categories/amqp/">AMQP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about architectures" href="/categories/architectures/">architectures</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about assembly" href="/categories/assembly/">assembly</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about AWS" href="/categories/aws/">AWS</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about big data" href="/categories/big-data/">big data</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about blogging" href="/categories/blogging/">blogging</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about C" href="/categories/c/">C</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Clojure" href="/categories/clojure/">Clojure</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about compilers" href="/categories/compilers/">compilers</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about concurrent programming" href="/categories/concurrent-programming/">concurrent programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about cryptography" href="/categories/cryptography/">cryptography</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about decorators" href="/categories/decorators/">decorators</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about design" href="/categories/design/">design</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about devops" href="/categories/devops/">devops</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about distributed systems" href="/categories/distributed-systems/">distributed systems</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Django" href="/categories/django/">Django</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Docker" href="/categories/docker/">Docker</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about ed25519" href="/categories/ed25519/">ed25519</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about editor" href="/categories/editor/">editor</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Emacs" href="/categories/emacs/">Emacs</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Erlang" href="/categories/erlang/">Erlang</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Flask" href="/categories/flask/">Flask</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about functional programming" href="/categories/functional-programming/">functional programming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about generators" href="/categories/generators/">generators</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Git" href="/categories/git/">Git</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about HTML" href="/categories/html/">HTML</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about HTTP" href="/categories/http/">HTTP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about infrastructure" href="/categories/infrastructure/">infrastructure</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about JavaScript" href="/categories/javascript/">JavaScript</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Lambda" href="/categories/lambda/">Lambda</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about M68000" href="/categories/m68000/">M68000</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Markdown" href="/categories/markdown/">Markdown</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Mau" href="/categories/mau/">Mau</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaclasses" href="/categories/metaclasses/">metaclasses</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about metaprogramming" href="/categories/metaprogramming/">metaprogramming</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Notebook" href="/categories/notebook/">Notebook</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about OOP" href="/categories/oop/">OOP</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about operating systems" href="/categories/operating-systems/">operating systems</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about pelican" href="/categories/pelican/">pelican</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Pika" href="/categories/pika/">Pika</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Postage" href="/categories/postage/">Postage</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about Postgres" href="/categories/postgres/">Postgres</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about pytest" href="/categories/pytest/">pytest</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python" href="/categories/python/">Python</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Python2" href="/categories/python2/">Python2</a>
    </li>
    <li class="tag tag-size-1">
      <a title="Posts about Python3" href="/categories/python3/">Python3</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about RabbitMQ" href="/categories/rabbitmq/">RabbitMQ</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about refactoring" href="/categories/refactoring/">refactoring</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about retroprogramming" href="/categories/retroprogramming/">retroprogramming</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about RSA" href="/categories/rsa/">RSA</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about Scala" href="/categories/scala/">Scala</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSH" href="/categories/ssh/">SSH</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about SSL" href="/categories/ssl/">SSL</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about TDD" href="/categories/tdd/">TDD</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about Terraform" href="/categories/terraform/">Terraform</a>
    </li>
    <li class="tag tag-size-2">
      <a title="Posts about testing" href="/categories/testing/">testing</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about tools" href="/categories/tools/">tools</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about versioning" href="/categories/versioning/">versioning</a>
    </li>
    <li class="tag tag-size-4">
      <a title="Posts about video" href="/categories/video/">video</a>
    </li>
    <li class="tag tag-size-3">
      <a title="Posts about WWW" href="/categories/www/">WWW</a>
    </li>
</ul></section>	</div>
	
<div class="page-content">
  <header>
    <h1>The Lord of the Rings: an Erlang epic</h1>
    <div class="post-info">
      <p>By Leonardo Giordani - <i class="fas fa-calendar-alt"></i> <time datetime="2013-06-20T17:49:00+01:00"> 20/06/2013</time></p>
      <p class="tags">
	<a class="tag category" href="/category/programming/" title="All posts in category Programming">Programming</a>
	<a class="tag" href="/categories/erlang/">Erlang</a>
	<a class="tag" href="/categories/concurrent-programming/">concurrent programming</a>
      </p>
      <p class="share">Share on: <span><a class="" href="https://twitter.com/intent/tweet?text=The%20Lord%20of%20the%20Rings%3A%20an%20Erlang%20epic&url=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/&via=thedigicat&hashtags=erlang,concurrent-programming" target="_blank" title="Share on Twitter"><i class="fab fa-twitter"></i> Twitter</a></span>
<span><a class="" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/&title=The%20Lord%20of%20the%20Rings%3A%20an%20Erlang%20epic&summary=&source=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/" target="_blank" title="Share on LinkedIn"><i class="fab fa-linkedin"></i> LinkedIn</a></span>
<span><a class="" href="https://news.ycombinator.com/submitlink?t=The%20Lord%20of%20the%20Rings%3A%20an%20Erlang%20epic&u=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/" target="_blank" title="Share on HackerNews"><i class="fab fa-hacker-news"></i> HackerNews</a></span>
<span><a class="" href="mailto:?subject=The%20Lord%20of%20the%20Rings%3A%20an%20Erlang%20epic&amp;body=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/" target="_blank" title="Share via Email"><i class="fas fa-envelope"></i> Email</a></span>
<span><a class="" href="https://www.reddit.com/submit?url=https%3A//www.thedigitalcatonline.com/blog/2013/06/20/the-lord-of-the-rings-an-erlang-epic/&title=The%20Lord%20of%20the%20Rings%3A%20an%20Erlang%20epic" target="_blank" title="Share via Reddit"><i class="fab fa-reddit"></i> Reddit</a></span></p>    
    </div>
  </header>
  
  <div class="post-content">
    <h2 id="abstract">Abstract<a class="headerlink" href="#abstract" title="Permanent link">&para;</a></h2>
<p>One of the first really challenging problems an Erlang novice must face is the classical process ring, which can be found around the Internet and most notably in "Erlang Programming" by Cesarini and Thompson (page 115).</p>
<p>Its formulation may vary, but the core of it requires the programmer to design and implement a closed ring of processes, to make them pass a given number of messages each other and then terminate gracefully.</p>
<p>I try here to give an in-depth analysis of the matter, to point out some of the most interesting issues of this exercise. I strongly suggest the Erlang novice to try and solve the exercise before looking at the solutions proposed here.</p>
<h2 id="linking-processes">Linking processes<a class="headerlink" href="#linking-processes" title="Permanent link">&para;</a></h2>
<p>The aim of the exercise is to build a chain of processes that exchange messages. The latter specification is important since we are required to connect our processes with the only purpose of sending messages and we know that, in Erlang, a process may send a message to another process simply by knowing its pid.</p>
<p>Actual linking between processes, in Erlang, has the aim of making them exchange <em>exit signals</em>; links are thus a mean to control the way the system collapses (or not) when a process crashes. The processes in the ring will thus be linked to ensure that when one of them exits all other processes will be terminated, but this has nothing to do with the ring itself.</p>
<p>The point is to let a process know how to send a message to the next one, forming a chain. This chain, then, is closed, i.e. the last process sends messages to the first one.</p>
<p>There are two main strategies that can be leveraged to get the ring build and behave in a correct way: the <strong>master process</strong> approach and the <strong>recursive</strong> one. For each of the two, I am going to present and analyze the following steps: a ring of processes with <strong>no message</strong> exchange, a ring with <strong>a single message</strong> travelling through it, a ring with <strong>multiple messages</strong> and a ring that exposes a <strong>functional interface</strong> to send messages.</p>
<h2 id="debugging">Debugging<a class="headerlink" href="#debugging" title="Permanent link">&para;</a></h2>
<p>Debugging concurrent applications is everything but simple. For this exercise, it is however enough to get simple information about which process is forwarding which message. To allow a simple removal of debug prints a very small macro has been included in the file <code>debug.hrl</code>, activated by the definition of <code>debug</code>.</p>
<div class="highlight"><pre><span></span><code><span class="p">-</span><span class="ni">ifdef</span><span class="p">(</span><span class="n">debug</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">DEBUG</span><span class="p">(</span><span class="nv">Format</span><span class="p">,</span><span class="w"> </span><span class="nv">Args</span><span class="p">),</span><span class="w"></span>
<span class="w">        </span><span class="nn">io</span><span class="p">:</span><span class="nf">format</span><span class="p">(</span><span class="s">&quot;</span><span class="si">~p</span><span class="s">: &quot;</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nv">Format</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">()]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="nv">Args</span><span class="p">)).</span><span class="w"></span>
<span class="p">-</span><span class="ni">else</span><span class="p">.</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">DEBUG</span><span class="p">(</span><span class="nv">Format</span><span class="p">,</span><span class="w"> </span><span class="nv">Args</span><span class="p">),</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">endif</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p>This converts the line</p>
<div class="highlight"><pre><span></span><code><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;A message</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[]).</span><span class="w"></span>
</code></pre></div>

<p>to</p>
<div class="highlight"><pre><span></span><code>&lt;<span class="m">0</span>.44.0&gt;: A message
</code></pre></div>

<p>where <code>&lt;0.44.0&gt;</code> is the pid of the message calling <code>?DEBUG</code> (only if <code>-define(debug, true).</code> is in the file).</p>
<h2 id="the-master-process-solution">The “master process” solution<a class="headerlink" href="#the-master-process-solution" title="Permanent link">&para;</a></h2>
<p>A good way to face the problem of building the ring is to spawn a <em>master process</em>, which will then spawn all other processes. This solution keeps the creation phase simple since everything happens between the master process and the process that is currently being spawned.</p>
<p>A small caveat: the creation of the ring must be performed <strong>backwards</strong>. When the master process spawns another process the only other process it knows is the process spawned in the previous loop. This means that the master process spawns a process that connects backwards to it, then spawns a process that connects backward to the second one, and so on.</p>
<h4 id="building-the-ring">Building the ring<a class="headerlink" href="#building-the-ring" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes without message passing</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_master_no_messages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program uses the first process as a</span><span class="w"></span>
<span class="c">%% master that spawns all other processes. It links to each process it spawns,</span><span class="w"></span>
<span class="c">%% but processes are not linked each other.</span><span class="w"></span>
<span class="c">%% Processes send no messages.</span><span class="w"></span>

<span class="c">%% This spawns the first process. There is no need to register the process.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Function create/1 needs to be defined so that the first process can call</span><span class="w"></span>
<span class="c">%% create/2 passing its pid through self().</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">()).</span><span class="w"></span>

<span class="c">%% Function create/2 manages the single process creation; in this version the</span><span class="w"></span>
<span class="c">%% master process just spawns each process and links to it. The exit clause</span><span class="w"></span>
<span class="c">%% is when the proceses counter reaches 1 (that is, we completed the ring).</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Prev</span><span class="p">).</span><span class="w"></span>

<span class="c">%% In this version function loop/1 sits down and does nothing.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">).</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_master_no_messages.erl">source code</a></p>
<p>Note that the first spawn cannot directly call <code>create/2</code> passing <code>self()</code> since at that moment <code>self()</code> is the pid of the calling process (e.g. the Erlang shell) and not the pid of the first process of the ring, which is what we want. So we have to bypass this by spawning a process which executes <code>create/1</code>, which in turn calls <code>create/2</code> with the pid the process extracted with <code>self()</code>.</p>
<p>This first program spawns a set of processes that sit down and do nothing. Since they are all linked together (through the link with the master process), you can terminate the whole set by sending an exit signal to one of them. You can get the list of pid and names through the shell function <code>i()</code>. Otherwise, you can get and use the pid returned by the function <code>start/1</code>.</p>
<div class="highlight"><pre><span></span><code><span class="mi">1</span><span class="o">&gt;</span><span class="w"> </span><span class="n">i</span><span class="p">().</span><span class="w"></span>
<span class="p">[...]</span><span class="w"></span>
<span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">exit</span><span class="p">(</span><span class="n">pid</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">boom</span><span class="p">).</span><span class="w"></span>
</code></pre></div>

<h4 id="sending-a-single-message">Sending a single message<a class="headerlink" href="#sending-a-single-message" title="Permanent link">&para;</a></h4>
<p>Now I am going to develop further the solution by making a single message travel the whole ring.</p>
<p>The code undergoes the following modifications:</p>
<ul>
<li>function <code>start()</code> must accept the message and pass it to <code>create()</code>.</li>
<li>function <code>create()</code> must accept the message</li>
<li>when the ring is ready the master process has to send the message to the second process; then it terminates</li>
<li>each node just forwards the incoming message and terminates</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes with a single</span><span class="w"></span>
<span class="c">%%%              message traveling once through the ring.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_master_single_message</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program uses the first process as a</span><span class="w"></span>
<span class="c">%% master that spawns all other processes. It links to each process it spawns,</span><span class="w"></span>
<span class="c">%% but processes are not linked each other.</span><span class="w"></span>
<span class="c">%% The first process then injects a single message in the ring, sending it to</span><span class="w"></span>
<span class="c">%% the second process.</span><span class="w"></span>

<span class="c">%% This spawns the first process. There is no need to register the process.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Function create/2 needs to be defined so that the first process can call</span><span class="w"></span>
<span class="c">%% create/3 passing its pid through self().</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function create/3 manages the single process creation; in this version the</span><span class="w"></span>
<span class="c">%% master process spawns each process and links to it. Then each process starts</span><span class="w"></span>
<span class="c">%% a loop. When the ring is completed the first process injects the message and</span><span class="w"></span>
<span class="c">%% terminates.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> injects message </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Message</span><span class="p">;</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Now loop/1 blocks each process making it wait for a message to pass along.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_master_single_message.erl">source code</a></p>
<p>Beware that a subtle mechanism conceals here: in Erlang, you can always send a message to a pid, even if it the relative process does not exist; in the latter case the message is simply discarded. This feature allows us to make the first process send the message and terminate without having the last process crash by sending a message to it. Remember that you cannot do this with registered processes alias, only with pids.</p>
<h4 id="sending-multiple-messages">Sending multiple messages<a class="headerlink" href="#sending-multiple-messages" title="Permanent link">&para;</a></h4>
<p>The exercise requests that a message can travel more than once through the whole ring. Adding this possibility is pretty straightforward: it simply requires to add a parameter to <code>start()</code> and <code>create()</code> and to change the loop clauses.</p>
<p>Function <code>loop/1</code> now becomes <code>loop/2</code> and has the following clauses:</p>
<ul>
<li>when the number of remaining travels is 1 the process forwards the message and then terminates.</li>
<li>when the number of remaining travels is more than 1 the process loops again with a decremented value of travels.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes with a single</span><span class="w"></span>
<span class="c">%%%              message traveling multiple times through the ring.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_master_multiple_messages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">3</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program uses the first process as a</span><span class="w"></span>
<span class="c">%% master that spawns all other processes. It links to each process it spawns,</span><span class="w"></span>
<span class="c">%% but processes are not linked each other.</span><span class="w"></span>
<span class="c">%% The first process then injects a message in the ring, sending it to the</span><span class="w"></span>
<span class="c">%% second process and when getting the message from the last process, it</span><span class="w"></span>
<span class="c">%% injects it again in the ring a given number of times.</span><span class="w"></span>

<span class="c">%% This spawns the first process. There is no need to register the process.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Function create/3 needs to be defined so that the first process can call</span><span class="w"></span>
<span class="c">%% create/4 passing its pid through self().</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function create/4 manages the single process creation; in this version the</span><span class="w"></span>
<span class="c">%% master process spawns each process and links to it. Then each process starts</span><span class="w"></span>
<span class="c">%% a loop. When the ring is completed the first process injects the message and</span><span class="w"></span>
<span class="c">%% starts looping.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> injects message </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">).</span><span class="w"></span>

<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> and terminating</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">;</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> (still </span><span class="si">~p</span><span class="s"> time(s))</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_master_multiple_messages.erl">source code</a></p>
<p>As before, we are here relying on the possibility of sending a message to a non existent process.</p>
<h4 id="exposing-a-functional-interface">Exposing a functional interface<a class="headerlink" href="#exposing-a-functional-interface" title="Permanent link">&para;</a></h4>
<p>An Erlang best practice is to expose a functional interface to the user that hides the underlying message passing. We are going to convert our ring program to expose the following functions:</p>
<ul>
<li><code>start/1</code> - starts a ring with the given number of processes</li>
<li><code>stop/0</code> - terminates all processes in the ring</li>
<li><code>send_message/1</code> - sends a message that travels once through the ring</li>
<li><code>send_message/2</code> - sends a message that travels the given number of times through the ring</li>
</ul>
<p>To expose a functional interface you need to register one or more processes, to get a global access point for your functions, so the first change to the code is that the spawned process is registered. Note that <code>Message</code> and <code>NumberProcesses</code> are no more passed to the <code>create()</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="nb">register</span><span class="p">(</span><span class="n">ring_master_functional</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">])),</span><span class="w"></span>
</code></pre></div>

<p>This is not enough. We have to be sure that the whole ring is ready before giving control back to the user issuing <code>start()</code>. Until now the message was sent by the master process just after the creation of the last ring process, so there was no need to synchronize the return of the start function with the spawned processes. Now we need it, so just after registering the master process we wait for a ready message coming from the ring. To allow the ring to send the message to the initial caller we have to pass <code>self()</code> to <code>create()</code>. Pay attention that <code>self()</code> passed to the spawned process is the pid of the external process (e.g. the Erlang shell) while <code>self()</code> passed to <code>create()</code> is the pid of the master ring process.</p>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes that exposes a</span><span class="w"></span>
<span class="c">%%%              functional interface to send messages.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_master_functional</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="c">%%-define(debug, true).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">send_message</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">send_message</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program uses the first process as a</span><span class="w"></span>
<span class="c">%% master that spawns all other processes. It links to each process it spawns,</span><span class="w"></span>
<span class="c">%% but processes are not linked each other.</span><span class="w"></span>
<span class="c">%% The module exposes a functional interface to send messages in the ring</span><span class="w"></span>
<span class="c">%% and to terminate it.</span><span class="w"></span>

<span class="c">%% This spawns the first process. The process is registered to allow the</span><span class="w"></span>
<span class="c">%% functional interface to work with it.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">register</span><span class="p">(</span><span class="n">ring_master_functional</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                                           </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">()])),</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="n">ready</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">after</span><span class="w"> </span><span class="mi">5000</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>

<span class="c">%% Functional interface: terminate the ring</span><span class="w"></span>
<span class="nf">stop</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_master_functional</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}.</span><span class="w"></span>

<span class="c">%% Functional interface: send a message that travels through the ring once</span><span class="w"></span>
<span class="nf">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Functional interface: send a message that travels through the ring</span><span class="w"></span>
<span class="c">%% Times times</span><span class="w"></span>
<span class="nf">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_master_functional</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]}.</span><span class="w"></span>

<span class="c">%% Function create/2 needs to be defined so that the first process can call</span><span class="w"></span>
<span class="c">%% create/3 passing its pid through self(). The Starter process is passed to</span><span class="w"></span>
<span class="c">%% allow the ring to send a ready message.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Starter</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function create/3 manages the single process creation; in this version the</span><span class="w"></span>
<span class="c">%% master process spawns each process and links to it. Then each process starts</span><span class="w"></span>
<span class="c">%% a loop. When the ring is completed the first process injects the message and</span><span class="w"></span>
<span class="c">%% terminates.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="nv">Starter</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">loop_master</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Prev</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function loop_master/1 rules the behaviour of the master process (the first</span><span class="w"></span>
<span class="c">%% of the whole ring). When it receives a stop command it forwards it and</span><span class="w"></span>
<span class="c">%% terminates. When it receives a message command if Times is 0 the message is</span><span class="w"></span>
<span class="c">%% thrown away, otherwise is is injected again in the ring with a decremented</span><span class="w"></span>
<span class="c">%% Times value.</span><span class="w"></span>
<span class="nf">loop_master</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">loop_master</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> (still </span><span class="si">~p</span><span class="s"> time(s)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]},</span><span class="w"></span>
<span class="w">            </span><span class="n">loop_master</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>

<span class="c">%% Function loop/1 rules the behaviour of the standard processes.</span><span class="w"></span>
<span class="c">%% When a process receives a stop command it forwards it and</span><span class="w"></span>
<span class="c">%% terminates. When it receives a message command it just forwards it.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="p">_]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_master_functional.erl">source code</a></p>
<p>The exposed functions are very simple. As you can see they use two different messages: <code>{command, stop}</code> and <code>{command, message, [Message, Times]}</code>. One of the advantages of exposing a functional API is that you are free to format your messages according to the current status of the software and change the format if it does no more suit the application needs.</p>
<p>The <code>loop()</code> function has been splitted in two different functions now: <code>loop/1</code> rules the behaviour of the standard ring process, while <code>loop_master/1</code> rules the behaviour of the master process.</p>
<p>The standard process has to react to a stop command, forwarding it and terminating, and to a message command, simply forwarding it. The master process has to check an incoming message to decide if it shall be injected again in the ring.</p>
<h2 id="a-recursive-solution">A recursive solution<a class="headerlink" href="#a-recursive-solution" title="Permanent link">&para;</a></h2>
<p>The simplest way to make a process know the pid of another process is to let the first spawn the second, and this gives us a hint about another way the process ring can be built. Like many things in Erlang, this can be solved recursively by saying:</p>
<p>In a process do:</p>
<ul>
<li>spawn another process and store its pid, call recursively on the spawned process</li>
<li>if you are the last process just connect to the first</li>
</ul>
<p>This solution has the advantage of being very straightforward for an Erlang programmer since it implements the standard recursion pattern. However, it forces the programmer to deal most of the time with the last node, which is a little counterintuitive.</p>
<p>The following programs are the recursive version of the four presented in the previous section. Once grasped the two main differences, building the ring forwards instead of backwards and dealing with the last node instead of the first, the two solutions present pretty much the same evolution steps.</p>
<p>The recursive ring construction.</p>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes without message passing</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_recursion_no_messages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program starts the processes in a</span><span class="w"></span>
<span class="c">%% recursive way. Each process spawns the next one and links to it.</span><span class="w"></span>
<span class="c">%% Processes send no messages.</span><span class="w"></span>

<span class="c">%% Please remember that io:format() does not always respect processes order</span><span class="w"></span>
<span class="c">%% and that as a general rule printing on the standard output from concurrent</span><span class="w"></span>
<span class="c">%% jobs is not very useful. Here I do this just to show that processes have been</span><span class="w"></span>
<span class="c">%% spawned. Remember to define debug false if you create a ring of more than</span><span class="w"></span>
<span class="c">%% 30-40 processes.</span><span class="w"></span>

<span class="c">%% This spawns the first process, registering it under the name</span><span class="w"></span>
<span class="c">%% &#39;ring_recursion_no_messages&#39;.</span><span class="w"></span>
<span class="c">%% Note that spawn() does never fail, but register may; if spawning the</span><span class="w"></span>
<span class="c">%% first process fails an exception is raised and the process calling</span><span class="w"></span>
<span class="c">%% start/1 is terminated.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">register</span><span class="p">(</span><span class="n">ring_recursion_no_messages</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                                               </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">])).</span><span class="w"></span>

<span class="c">%% Function create/1 manages the single process creation; in this version the</span><span class="w"></span>
<span class="c">%% only thing a process shall do is to spawn another process. The exit clause</span><span class="w"></span>
<span class="c">%% is when the proceses counter reaches 1 (that is, the current process is the</span><span class="w"></span>
<span class="c">%% last one): the last process uses &#39;ring_recursion_no_messages&#39; as its next</span><span class="w"></span>
<span class="c">%% process, thus closing the ring.</span><span class="w"></span>
<span class="c">%% Here we use the only parameter(NumberProcesses) as the index for the current</span><span class="w"></span>
<span class="c">%% process, so we end when the parameter is 1. If we want to think of it as the</span><span class="w"></span>
<span class="c">%% number of REMAINING processes the only changes are that the exit clause is</span><span class="w"></span>
<span class="c">%% create(0) instead of create(1), and that the first process is spawned in</span><span class="w"></span>
<span class="c">%% start/1 with [NumberProcesses - 1] as argument. It is only a matter of taste.</span><span class="w"></span>
<span class="c">%% Since all processes in the ring are meant to work together we are linking</span><span class="w"></span>
<span class="c">%% them together to ensure that if one fails all others are terminated.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> (last)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nb">whereis</span><span class="p">(</span><span class="n">ring_recursion_no_messages</span><span class="p">)]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="n">ring_recursion_no_messages</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="mi">1</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> </span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Next</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">Next</span><span class="p">).</span><span class="w"></span>

<span class="c">%% In this version function loop/1 sits down and does nothing.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">).</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_recursion_no_messages.erl">source code</a></p>
<p>The recursive ring with a single message travelling.</p>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes with a single</span><span class="w"></span>
<span class="c">%%%              message traveling once through the ring.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_recursion_single_message</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program starts the processes in a</span><span class="w"></span>
<span class="c">%% recursive way. Each process spawns the next one and links to it.</span><span class="w"></span>
<span class="c">%% The last process then injects a single message in the ring, sending it to the</span><span class="w"></span>
<span class="c">%% first process.</span><span class="w"></span>

<span class="c">%% This spawns the first process passing the requested message to it</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">register</span><span class="p">(</span><span class="n">ring_recursion_single_message</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                                                  </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">])).</span><span class="w"></span>

<span class="c">%% Function create/2 manages the single process creation; in this version each</span><span class="w"></span>
<span class="c">%% process just spawns another process, except the last one, which shall inject</span><span class="w"></span>
<span class="c">%% the message in the ring and terminate.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> (last)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nb">whereis</span><span class="p">(</span><span class="n">ring_recursion_single_message</span><span class="p">)]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> injects message </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_recursion_single_message</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Message</span><span class="p">;</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> </span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Next</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">Next</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Now loop/1 blocks each process making it wait for a message to pass along.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_recursion_single_message.erl">source code</a></p>
<p>The recursive ring with support for multiple message travels.</p>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes with a single</span><span class="w"></span>
<span class="c">%%%              message traveling multiple times through the ring.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_recursion_multiple_messages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">3</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program starts the processes in a</span><span class="w"></span>
<span class="c">%% recursive way. Each process spawns the next one and links to it.</span><span class="w"></span>
<span class="c">%% The last process then injects a message in the ring, sending it to the</span><span class="w"></span>
<span class="c">%% first process and when getting the message from the second to last, it</span><span class="w"></span>
<span class="c">%% injects it again in the ring a given number of times.</span><span class="w"></span>

<span class="c">%% This spawns the first process passing it the requested message and the number</span><span class="w"></span>
<span class="c">%% of times the message shall travel through the ring.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">register</span><span class="p">(</span><span class="n">ring_recursion_multiple_messages</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                          </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">])).</span><span class="w"></span>

<span class="c">%% Function create/3 manages the single process creation; in this version each</span><span class="w"></span>
<span class="c">%% process spawns another process and then loops, except the last one, which</span><span class="w"></span>
<span class="c">%% shall inject the message in the ring before looping. Since the last process</span><span class="w"></span>
<span class="c">%% starts the message passing it loops an already decremented number of times.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> (last)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nb">whereis</span><span class="p">(</span><span class="n">ring_recursion_multiple_messages</span><span class="p">)]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> injects message </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Message</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_recursion_multiple_messages</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="n">ring_recursion_multiple_messages</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                      </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> </span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Next</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">Next</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function loop/2 needs two clauses now. The first one is the exit condition,</span><span class="w"></span>
<span class="c">%% when the forward counter reaches 1: the process forwards the message and</span><span class="w"></span>
<span class="c">%% terminates. The second clause is the standard behaviour: the process forwards</span><span class="w"></span>
<span class="c">%% the incoming message and loops again with a decremented counter.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> and terminating</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">;</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> (still </span><span class="si">~p</span><span class="s"> time(s))</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Msg</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">NumberMessages</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_recursion_multiple_messages.erl">source code</a></p>
<p>The recursive ring exposing the functional API.</p>
<div class="highlight"><pre><span></span><code><span class="c">%%% Author:  Leonardo Giordani &lt;giordani.leonardo@gmail.com&gt;</span><span class="w"></span>
<span class="c">%%% Description: Implements a simple ring of processes that exposes a</span><span class="w"></span>
<span class="c">%%%              functional interface to send messages.</span><span class="w"></span>
<span class="c">%%% Created: Jun 2013 by Leonardo Giordani</span><span class="w"></span>

<span class="p">-</span><span class="ni">module</span><span class="p">(</span><span class="n">ring_recursion_functional</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Include some debug macros</span><span class="w"></span>
<span class="p">-</span><span class="ni">define</span><span class="p">(</span><span class="no">debug</span><span class="p">,</span><span class="w"> </span><span class="n">true</span><span class="p">).</span><span class="w"></span>
<span class="p">-</span><span class="ni">include</span><span class="p">(</span><span class="s">&quot;debug.hrl&quot;</span><span class="p">).</span><span class="w"></span>

<span class="c">%% User interface</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">start</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">send_message</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">send_message</span><span class="o">/</span><span class="mi">2</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% Private exports</span><span class="w"></span>
<span class="p">-</span><span class="ni">export</span><span class="p">([</span><span class="n">create</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">loop</span><span class="o">/</span><span class="mi">1</span><span class="p">]).</span><span class="w"></span>

<span class="c">%% This version of the processes ring program starts the processes in a</span><span class="w"></span>
<span class="c">%% recursive way. Each process spawns the next one and links to it.</span><span class="w"></span>
<span class="c">%% The module exposes a functional interface to send messages in the ring</span><span class="w"></span>
<span class="c">%% and to terminate it.</span><span class="w"></span>

<span class="c">%% This spawns the first process. The process is registered as in the previous</span><span class="w"></span>
<span class="c">%% recursive versions to allow the last process to connect with the first.</span><span class="w"></span>
<span class="c">%% Moreover, exposing a functional interface needs a global entry point, that is</span><span class="w"></span>
<span class="c">%% the name of the first process.</span><span class="w"></span>
<span class="nf">start</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nb">register</span><span class="p">(</span><span class="n">ring_recursion_functional</span><span class="p">,</span><span class="w"> </span><span class="nb">spawn</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"></span>
<span class="w">                                              </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p">()])),</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="n">ready</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="w"></span>
<span class="w">    </span><span class="k">after</span><span class="w"> </span><span class="mi">5000</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">timeout</span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>

<span class="c">%% Functional interface: terminate the ring</span><span class="w"></span>
<span class="nf">stop</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_master_functional</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}.</span><span class="w"></span>

<span class="c">%% Functional interface: send a message that travels through the ring once</span><span class="w"></span>
<span class="nf">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Functional interface: send a message that travels through the ring</span><span class="w"></span>
<span class="c">%% Times times</span><span class="w"></span>
<span class="nf">send_message</span><span class="p">(</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">ring_recursion_functional</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]}.</span><span class="w"></span>

<span class="c">%% Function create/2 manages the single process creation; in this version each</span><span class="w"></span>
<span class="c">%% process just spawns another process, except the last one, which connects with</span><span class="w"></span>
<span class="c">%% the first one. The Starter process is passed to allow the ring to send a</span><span class="w"></span>
<span class="c">%% ready message.</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> (last)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">           </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nb">whereis</span><span class="p">(</span><span class="n">ring_recursion_functional</span><span class="p">)]),</span><span class="w"></span>
<span class="w">    </span><span class="nv">Starter</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">loop_last</span><span class="p">(</span><span class="n">ring_recursion_functional</span><span class="p">);</span><span class="w"></span>
<span class="nf">create</span><span class="p">(</span><span class="nv">NumberProcesses</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="nv">Next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">spawn_link</span><span class="p">(</span><span class="o">?</span><span class="nv">MODULE</span><span class="p">,</span><span class="w"> </span><span class="n">create</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">NumberProcesses</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nv">Starter</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Process </span><span class="si">~p</span><span class="s"> created and connected with </span><span class="si">~p</span><span class="s"> </span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">self</span><span class="p">(),</span><span class="w"> </span><span class="nv">Next</span><span class="p">]),</span><span class="w"></span>
<span class="w">    </span><span class="n">loop</span><span class="p">(</span><span class="nv">Next</span><span class="p">).</span><span class="w"></span>

<span class="c">%% Function loop_last/1 rules the behaviour of the last process of the whole</span><span class="w"></span>
<span class="c">%% ring). When it receives a stop command it just terminates since the message</span><span class="w"></span>
<span class="c">%% has already been received by all processes in the ring. When it receives a</span><span class="w"></span>
<span class="c">%% message command if Times is 1 the message is thrown away (it just travelled</span><span class="w"></span>
<span class="c">%% through the ring for the last time), otherwise is is injected again in the</span><span class="w"></span>
<span class="c">%% ring with a decremented Times value.</span><span class="w"></span>
<span class="nf">loop_last</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">loop_last</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p</span><span class="s"> (still </span><span class="si">~p</span><span class="s"> time(s)</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">Times</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]},</span><span class="w"></span>
<span class="w">            </span><span class="n">loop_last</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>

<span class="c">%% Function loop/1 rules the behaviour of the standard processes.</span><span class="w"></span>
<span class="c">%% When a process receives a stop command it forwards it and</span><span class="w"></span>
<span class="c">%% terminates. When it receives a message command it just forwards it.</span><span class="w"></span>
<span class="nf">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">    </span><span class="k">receive</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">ok</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="nv">Msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w"> </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="p">_]}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"></span>
<span class="w">            </span><span class="o">?</span><span class="nv">DEBUG</span><span class="p">(</span><span class="s">&quot;Got message </span><span class="si">~p</span><span class="s">, passing it to </span><span class="si">~p~n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="p">[_</span><span class="nv">Message</span><span class="p">,</span><span class="w"> </span><span class="nv">NextProcess</span><span class="p">]),</span><span class="w"></span>
<span class="w">            </span><span class="nv">NextProcess</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="nv">Msg</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">loop</span><span class="p">(</span><span class="nv">NextProcess</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">end</span><span class="p">.</span><span class="w"></span>
</code></pre></div>

<p><a href="/code/erlang-rings/ring_recursion_functional.erl">source code</a></p>
<h2 id="conclusions">Conclusions<a class="headerlink" href="#conclusions" title="Permanent link">&para;</a></h2>
<p>The process ring is an exercise that can be solved in many ways (I just presented the two more straightforward ones) but makes the programmer face problems that may later rise in real-world applications. For this reason, it is an invaluable sandbox where the Erlang programmer can try different approaches to solve both the concurrency and the topology problems.</p>
<p>Keep in touch for other Erlang articles on <a href="/categories/erlang/">this page</a>.</p>
  </div>


  <section>
    <header>
      <h2>Related Posts</h2>
    </header>
    <div class="paginated-posts">
      <div class="posts">
	<article class="card">
          <a href="/blog/2013/05/30/error-handling-in-erlang-a-primer/">
            <img src="/images/error-handling-in-erlang-a-primer.jpg" alt="error-handling-in-erlang-a-primer" />
          </a>
          <div class="body">
            <a href="/blog/2013/05/30/error-handling-in-erlang-a-primer/"><h2>Error handling in Erlang - a primer</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/erlang/" class="tag">Erlang</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-05-30T11:41:00+01:00">May 30, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2020/02/16/dissecting-a-web-stack/">
            <img src="/images/dissecting-a-web-stack.jpg" alt="dissecting-a-web-stack" />
          </a>
          <div class="body">
            <a href="/blog/2020/02/16/dissecting-a-web-stack/"><h2>Dissecting a Web stack</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/architectures/" class="tag">architectures</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
		<a href="/categories/cryptography/" class="tag">cryptography</a>
		<a href="/categories/devops/" class="tag">devops</a>
		<a href="/categories/infrastructure/" class="tag">infrastructure</a>
		<a href="/categories/flask/" class="tag">Flask</a>
		<a href="/categories/django/" class="tag">Django</a>
		<a href="/categories/python/" class="tag">Python</a>
		<a href="/categories/ssl/" class="tag">SSL</a>
		<a href="/categories/http/" class="tag">HTTP</a>
		<a href="/categories/www/" class="tag">WWW</a>
		<a href="/categories/aws/" class="tag">AWS</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2020-02-16T15:00:00+00:00">Feb 16, 2020</time></p>
	      <p><i class="fas fa-edit"></i> Updated on <time datetime="2020-10-27T08:30:00+00:00">Oct 27, 2020</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/04/23/concurrent-programming-6/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/04/23/concurrent-programming-6/"><h2>Concurrent programming - 6</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-04-23T08:29:00+02:00">Apr 23, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/02/28/concurrent-programming-5/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/02/28/concurrent-programming-5/"><h2>Concurrent programming - 5</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-02-28T17:49:00+02:00">Feb 28, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/02/13/concurrent-programming-4/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/02/13/concurrent-programming-4/"><h2>Concurrent programming - 4</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-02-13T10:50:00+02:00">Feb 13, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/02/06/concurrent-programming-3/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/02/06/concurrent-programming-3/"><h2>Concurrent programming - 3</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-02-06T12:25:00+02:00">Feb 6, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/02/04/concurrent-programming-2/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/02/04/concurrent-programming-2/"><h2>Concurrent programming - 2</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-02-04T10:35:00+02:00">Feb 4, 2013</time></p>
	    </div>
          </div>
	</article>
	<article class="card">
          <a href="/blog/2013/01/31/concurrent-programming-1/">
            <img src="/images/concurrent-programming.jpg" alt="concurrent-programming" />
          </a>
          <div class="body">
            <a href="/blog/2013/01/31/concurrent-programming-1/"><h2>Concurrent programming - 1</h2></a>
	    <div class="info">
	      <p class="tags">
		<a href="/categories/c/" class="tag">C</a>
		<a href="/categories/operating-systems/" class="tag">operating systems</a>
		<a href="/categories/concurrent-programming/" class="tag">concurrent programming</a>
              </p>
	      <p><i class="fas fa-calendar-alt"></i> <time datetime="2013-01-31T16:47:00+02:00">Jan 31, 2013</time></p>
	    </div>
          </div>
	</article>
      </div>
    </div>
  </section>
  
</div>

      </div>
    </div>
    <script src="/theme/js/packed.js?46a8f903"></script>

  </body>
</html>